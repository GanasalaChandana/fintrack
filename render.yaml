services:
  # API Gateway
  - type: web
    name: fintrack-api-gateway
    env: docker
    dockerfilePath: ./backend/api-gateway/Dockerfile
    dockerContext: .
    envVars:
      - key: SPRING_PROFILES_ACTIVE
        value: production
      - key: SERVER_PORT
        value: 8080

  # Users Service
  - type: web
    name: fintrack-users-service
    env: docker
    dockerfilePath: ./backend/users-service/Dockerfile
    dockerContext: .
    envVars:
      - key: SPRING_PROFILES_ACTIVE
        value: production
      - key: SERVER_PORT
        value: 8081
      - key: SPRING_DATASOURCE_URL
        value: jdbc:postgresql://dpg-d3qmi9c9c44c73csr6ug-a.oregon-postgres.render.com:5432/fintrack_user
      - key: SPRING_DATASOURCE_USERNAME
        value: fintrack_user
      - key: SPRING_DATASOURCE_PASSWORD
        fromDatabase:
          name: fintrack-postgres
          property: password

  # Transactions Service
  - type: web
    name: fintrack-transactions-service
    env: docker
    dockerfilePath: ./backend/transactions-service/Dockerfile
    dockerContext: .
    envVars:
      - key: SPRING_PROFILES_ACTIVE
        value: production
      - key: SERVER_PORT
        value: 8082
      - key: SPRING_DATASOURCE_URL
        value: jdbc:postgresql://dpg-d3qmi9c9c44c73csr6ug-a.oregon-postgres.render.com:5432/fintrack_user
      - key: SPRING_DATASOURCE_USERNAME
        value: fintrack_user
      - key: SPRING_DATASOURCE_PASSWORD
        fromDatabase:
          name: fintrack-postgres
          property: password
      - key: SPRING_REDIS_HOST
        value: red-d3qmmdl6ubrc73834m80
      - key: SPRING_REDIS_PORT
        value: 6379

  # Alerts Service
  - type: web
    name: fintrack-alerts-service
    env: docker
    dockerfilePath: ./backend/alerts-service/Dockerfile
    dockerContext: .
    envVars:
      - key: SPRING_PROFILES_ACTIVE
        value: production
      - key: SERVER_PORT
        value: 8083
      - key: SPRING_DATASOURCE_URL
        value: jdbc:postgresql://dpg-d3qmi9c9c44c73csr6ug-a.oregon-postgres.render.com:5432/fintrack_user
      - key: SPRING_DATASOURCE_USERNAME
        value: fintrack_user
      - key: SPRING_DATASOURCE_PASSWORD
        fromDatabase:
          name: fintrack-postgres
          property: password
      - key: SPRING_REDIS_HOST
        value: red-d3qmmdl6ubrc73834m80
      - key: SPRING_REDIS_PORT
        value: 6379

  # Reports Service
  - type: web
    name: fintrack-reports-service
    env: docker
    dockerfilePath: ./backend/reports-service/Dockerfile
    dockerContext: .
    envVars:
      - key: SPRING_PROFILES_ACTIVE
        value: production
      - key: SERVER_PORT
        value: 8084
      - key: SPRING_DATASOURCE_URL
        value: jdbc:postgresql://dpg-d3qmi9c9c44c73csr6ug-a.oregon-postgres.render.com:5432/fintrack_user
      - key: SPRING_DATASOURCE_USERNAME
        value: fintrack_user
      - key: SPRING_DATASOURCE_PASSWORD
        fromDatabase:
          name: fintrack-postgres
          property: password
      - key: SPRING_REDIS_HOST
        value: red-d3qmmdl6ubrc73834m80
      - key: SPRING_REDIS_PORT
        value: 6379
